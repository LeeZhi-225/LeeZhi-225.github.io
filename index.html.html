<!DOCTYPE html>
<html lang="zh-CN">
<head>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#165DFF">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人生倒计时 | 珍惜每一刻</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36CFC9',
                        accent: '#FF7D00',
                        dark: '#1D2129',
                        light: '#F2F3F5'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .transition-all-300 {
                transition: all 300ms ease-in-out;
            }
            .card-hover {
                @apply hover:shadow-lg hover:-translate-y-1 transition-all duration-300;
            }
        }
    </style>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: #f9fafb;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(22, 93, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(54, 207, 201, 0.05) 0%, transparent 20%);
            background-attachment: fixed;
        }
        
        .countdown-number {
            transition: transform 0.3s ease, color 0.3s ease;
        }
        
        .countdown-number:hover {
            transform: scale(1.05);
        }
        
        .progress-bar {
            height: 8px;
            background: linear-gradient(90deg, #165DFF 0%, #36CFC9 100%);
            width: 0%;
            transition: width 1s ease-in-out;
            border-radius: 4px;
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-in-out forwards;
            opacity: 0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(48%) sepia(13%) saturate(3207%) hue-rotate(130deg) brightness(95%) contrast(80%);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- 页面头部 -->
    <header class="w-full py-8 px-4 md:px-8 lg:px-16 bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto">
            <h1 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark text-center">
                <span class="text-primary"><i class="fa fa-clock-o mr-2"></i></span>
                人生倒计时
            </h1>
            <p class="text-center text-gray-600 mt-2 max-w-2xl mx-auto">
                珍惜每一刻，把握当下。设定你的出生日和预期寿命，见证时间的流逝。
            </p>
        </div>
    </header>

    <!-- 主要内容区 -->
    <main class="flex-grow px-4 md:px-8 lg:px-16 py-8">
        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-5 gap-8">
            
            <!-- 设置面板 -->
            <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6 card-hover fade-in" style="animation-delay: 0.1s">
                <h2 class="text-xl font-semibold text-dark mb-6 flex items-center">
                    <i class="fa fa-cog text-primary mr-2"></i> 个人设置
                </h2>
                
                <form id="settingsForm" class="space-y-6">
                    <div class="space-y-2">
                        <label for="birthDate" class="block text-gray-700 font-medium">出生日期</label>
                        <div class="relative">
                            <input 
                                type="date" 
                                id="birthDate" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all-300"
                                required
                            >
                            <div class="absolute right-3 top-1/2 -translate-y-1/2 text-primary">
                                <i class="fa fa-calendar"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        <label for="lifeExpectancy" class="block text-gray-700 font-medium">预期寿命 (岁)</label>
                        <div class="relative">
                            <input 
                                type="number" 
                                id="lifeExpectancy" 
                                min="0" 
                                max="150" 
                                value="80" 
                                class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all-300"
                                required
                            >
                            <div class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500">
                                岁
                            </div>
                        </div>
                        <p class="text-sm text-gray-500 mt-1">全球平均预期寿命约为73岁，发达国家约为80岁</p>
                    </div>
                    
                    <button 
                        type="submit" 
                        class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-lg transition-all-300 flex items-center justify-center gap-2 group"
                    >
                        <span>开始倒计时</span>
                        <i class="fa fa-arrow-right transform group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </form>
                
                <div class="mt-8 pt-6 border-t border-gray-100">
                    <h3 class="text-lg font-medium text-gray-700 mb-4">人生数据</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">已活天数:</span>
                            <span id="daysLived" class="font-semibold text-dark">-</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">人生进度:</span>
                            <span id="lifeProgressPercent" class="font-semibold text-primary">-</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                            <div id="lifeProgressBar" class="progress-bar"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 倒计时显示 -->
            <div class="lg:col-span-3 space-y-6">
                <!-- 倒计时卡片 -->
                <div id="countdownCard" class="bg-white rounded-xl shadow-md p-6 md:p-8 hidden fade-in" style="animation-delay: 0.3s">
                    <h2 class="text-xl font-semibold text-dark mb-6 flex items-center">
                        <i class="fa fa-hourglass-half text-accent mr-2"></i> 剩余人生时间
                    </h2>
                    
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6">
                        <!-- 天 -->
                        <div class="bg-light rounded-lg p-4 text-center countdown-number">
                            <div id="days" class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-primary">0</div>
                            <div class="text-gray-600 mt-1">天</div>
                        </div>
                        
                        <!-- 时 -->
                        <div class="bg-light rounded-lg p-4 text-center countdown-number">
                            <div id="hours" class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-primary">0</div>
                            <div class="text-gray-600 mt-1">时</div>
                        </div>
                        
                        <!-- 分 -->
                        <div class="bg-light rounded-lg p-4 text-center countdown-number">
                            <div id="minutes" class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-primary">0</div>
                            <div class="text-gray-600 mt-1">分</div>
                        </div>
                        
                        <!-- 秒 -->
                        <div class="bg-light rounded-lg p-4 text-center countdown-number pulse">
                            <div id="seconds" class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-accent">0</div>
                            <div class="text-gray-600 mt-1">秒</div>
                        </div>
                    </div>
                    
                    <div class="mt-8 text-center">
                        <p id="lifeSummary" class="text-gray-700 italic"></p>
                    </div>
                </div>
                
                <!-- 初始提示卡片 -->
                <div id="initialCard" class="bg-white rounded-xl shadow-md p-8 text-center fade-in" style="animation-delay: 0.3s">
                    <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fa fa-lightbulb-o text-2xl text-primary"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-dark mb-2">开始你的人生倒计时</h3>
                    <p class="text-gray-600 max-w-md mx-auto">
                        在左侧设置你的出生日期和预期寿命，我们将为你计算剩余的人生时间，
                        帮助你更好地珍惜每一刻。
                    </p>
                </div>
                
                <!-- 名言卡片 -->
                <div class="bg-gradient-to-r from-primary/10 to-secondary/10 rounded-xl p-6 md:p-8 fade-in" style="animation-delay: 0.5s">
                    <h3 class="text-lg font-medium text-dark mb-4 flex items-center">
                        <i class="fa fa-quote-left text-primary/70 mr-2"></i> 时光名言
                    </h3>
                    <blockquote id="quote" class="text-gray-700 italic">
                        "人生不是等待暴风雨过去，而是要学会在雨中跳舞。"
                    </blockquote>
                    <p id="quoteAuthor" class="text-right mt-2 text-gray-600">— 薇薇安·格林</p>
                </div>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="w-full py-6 px-4 bg-dark text-white/70 text-center text-sm">
        <div class="max-w-6xl mx-auto">
            <p>珍惜当下，活在每一刻 <i class="fa fa-heart text-accent"></i></p>
            <p class="mt-2">人生倒计时 &copy; 2023</p>
        </div>
    </footer>

    <script>
        // 名言库
        const quotes = [
            { text: "人生不是等待暴风雨过去，而是要学会在雨中跳舞。", author: "— 薇薇安·格林" },
            { text: "昨天是历史，明天是谜团，而今天是礼物，这就是为什么它被称为现在。", author: "— 爱丽丝·莫尔斯·厄尔" },
            { text: "不要等到明天，明天太遥远，今天就行动。", author: "— 李小龙" },
            { text: "生命中最重要的不是你所拥有的，而是你所经历的。", author: "— 马克·吐温" },
            { text: "时间是最公平的，每个人每天都只有24小时。", author: "— 佚名" },
            { text: "人生的价值不在于长度，而在于深度。", author: "— 拉尔夫·沃尔多·爱默生" },
            { text: "我们最大的光荣不在于永不失败，而在于每次跌倒后都能爬起来。", author: "— 纳尔逊·曼德拉" }
        ];
        
        // 随机显示一条名言
        function showRandomQuote() {
            const randomIndex = Math.floor(Math.random() * quotes.length);
            document.getElementById('quote').textContent = quotes[randomIndex].text;
            document.getElementById('quoteAuthor').textContent = quotes[randomIndex].author;
        }
        
        // 初始化页面
        document.addEventListener('DOMContentLoaded', () => {
            showRandomQuote();
            
            // 尝试从本地存储加载设置
            const savedBirthDate = localStorage.getItem('birthDate');
            const savedLifeExpectancy = localStorage.getItem('lifeExpectancy');
            
            if (savedBirthDate && savedLifeExpectancy) {
                document.getElementById('birthDate').value = savedBirthDate;
                document.getElementById('lifeExpectancy').value = savedLifeExpectancy;
                // 自动开始倒计时
                document.getElementById('settingsForm').dispatchEvent(new Event('submit'));
            }
        });
        
        // 倒计时逻辑
        let countdownInterval;
        
        document.getElementById('settingsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 清除之前的倒计时
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            // 获取用户输入
            const birthDate = new Date(document.getElementById('birthDate').value);
            const lifeExpectancy = parseInt(document.getElementById('lifeExpectancy').value);
            
            // 保存到本地存储
            localStorage.setItem('birthDate', document.getElementById('birthDate').value);
            localStorage.setItem('lifeExpectancy', lifeExpectancy);
            
            // 计算预期寿命结束日期
            const deathDate = new Date(birthDate);
            deathDate.setFullYear(birthDate.getFullYear() + lifeExpectancy);
            
            // 显示倒计时卡片，隐藏初始卡片
            document.getElementById('countdownCard').classList.remove('hidden');
            document.getElementById('initialCard').classList.add('hidden');
            
            // 更新倒计时
            function updateCountdown() {
                const now = new Date();
                
                // 计算剩余时间
                const timeLeft = deathDate - now;
                
                // 如果已经超过预期寿命
                if (timeLeft <= 0) {
                    document.getElementById('days').textContent = '0';
                    document.getElementById('hours').textContent = '0';
                    document.getElementById('minutes').textContent = '0';
                    document.getElementById('seconds').textContent = '0';
                    document.getElementById('lifeSummary').textContent = '你已经超越了预期寿命，恭喜你！继续享受生活吧！';
                    
                    if (countdownInterval) {
                        clearInterval(countdownInterval);
                    }
                    return;
                }
                
                // 计算天、时、分、秒
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                
                // 更新DOM
                document.getElementById('days').textContent = days;
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                
                // 更新人生摘要
                const totalLifeDays = Math.floor((deathDate - birthDate) / (1000 * 60 * 60 * 24));
                const daysLived = Math.floor((now - birthDate) / (1000 * 60 * 60 * 24));
                const lifeProgress = (daysLived / totalLifeDays) * 100;
                
                document.getElementById('daysLived').textContent = daysLived;
                document.getElementById('lifeProgressPercent').textContent = lifeProgress.toFixed(1) + '%';
                document.getElementById('lifeProgressBar').style.width = lifeProgress + '%';
                
                // 设置人生摘要文本
                const age = Math.floor(daysLived / 365);
                document.getElementById('lifeSummary').textContent = 
                    `你已经活了 ${age} 年，约 ${daysLived} 天，剩余 ${days} 天。`;
            }
            
            // 立即更新一次
            updateCountdown();
            
            // 每秒更新一次
            countdownInterval = setInterval(updateCountdown, 1000);
        });
    </script>
</body>
</html>
